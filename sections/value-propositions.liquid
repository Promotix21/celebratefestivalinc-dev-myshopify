<!-- sections/value-propositions.liquid -->
<style>
  .value-propositions-{{ section.id }} {
    padding: {{ section.settings.section_padding_top_desktop }}px 0 {{ section.settings.section_padding_bottom_desktop }}px;
    background: {{ section.settings.section_background_color }};
  }
  
  @media (max-width: 768px) {
    .value-propositions-{{ section.id }} {
      padding: {{ section.settings.section_padding_top_mobile }}px 0 {{ section.settings.section_padding_bottom_mobile }}px;
    }
  }
  
  .value-propositions-{{ section.id }} .container {
    max-width: {{ section.settings.container_max_width }}px;
    margin: 0 auto;
    padding: 0 {{ section.settings.container_padding }}px;
  }
  
  .value-propositions-{{ section.id }} .props-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: {{ section.settings.grid_gap_desktop }}px;
    align-items: stretch;
  }
  
  @media (max-width: 992px) {
    .value-propositions-{{ section.id }} .props-grid {
      grid-template-columns: repeat(4, 1fr);
      gap: {{ section.settings.grid_gap_tablet }}px;
    }
  }
  
  @media (max-width: 768px) {
    .value-propositions-{{ section.id }} .props-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: {{ section.settings.grid_gap_mobile }}px;
    }
  }
  
  .value-propositions-{{ section.id }} .prop-card {
    background: {{ section.settings.card_background_color }};
    border-radius: {{ section.settings.card_border_radius }}px;
    padding: {{ section.settings.card_padding_desktop }}px;
    text-align: {{ section.settings.card_text_alignment }};
    border: {{ section.settings.card_border_width }}px solid {{ section.settings.card_border_color }};
    box-shadow: {{ section.settings.card_shadow }};
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: {{ section.settings.card_content_alignment }};
    justify-content: center;
    opacity: 0;
    transform: translateY(50px);
    transition: all {{ section.settings.card_hover_transition }}s ease;
  }
  
  .value-propositions-{{ section.id }} .prop-card.animate-in {
    opacity: 1;
    transform: translateY(0);
  }
  
  .value-propositions-{{ section.id }} .prop-card:nth-child(1) { 
    transition-delay: {{ section.settings.animation_delay_base }}s; 
  }
  .value-propositions-{{ section.id }} .prop-card:nth-child(2) { 
    transition-delay: {{ section.settings.animation_delay_base | plus: 0.1 }}s; 
  }
  .value-propositions-{{ section.id }} .prop-card:nth-child(3) { 
    transition-delay: {{ section.settings.animation_delay_base | plus: 0.2 }}s; 
  }
  .value-propositions-{{ section.id }} .prop-card:nth-child(4) { 
    transition-delay: {{ section.settings.animation_delay_base | plus: 0.3 }}s; 
  }
  .value-propositions-{{ section.id }} .prop-card:nth-child(5) { 
    transition-delay: {{ section.settings.animation_delay_base | plus: 0.4 }}s; 
  }
  .value-propositions-{{ section.id }} .prop-card:nth-child(6) { 
    transition-delay: {{ section.settings.animation_delay_base | plus: 0.5 }}s; 
  }
  .value-propositions-{{ section.id }} .prop-card:nth-child(7) { 
    transition-delay: {{ section.settings.animation_delay_base | plus: 0.6 }}s; 
  }
  .value-propositions-{{ section.id }} .prop-card:nth-child(8) { 
    transition-delay: {{ section.settings.animation_delay_base | plus: 0.7 }}s; 
  }
  
  @media (max-width: 768px) {
    .value-propositions-{{ section.id }} .prop-card {
      padding: {{ section.settings.card_padding_mobile }}px;
    }
  }
  
  .value-propositions-{{ section.id }} .prop-card:hover {
    transform: translateY({{ section.settings.card_hover_translate }}px);
    box-shadow: {{ section.settings.card_hover_shadow }};
    background: {{ section.settings.card_hover_background_color }};
  }
  
  .value-propositions-{{ section.id }} .prop-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto {{ section.settings.icon_margin_bottom }}px;
    transition: all {{ section.settings.icon_hover_transition }}s ease;
  }
  
  .value-propositions-{{ section.id }} .prop-icon img {
    width: {{ section.settings.icon_image_size }}px;
    height: {{ section.settings.icon_image_size }}px;
    object-fit: contain;
    transition: transform {{ section.settings.icon_hover_transition }}s ease;
  }
  
  .value-propositions-{{ section.id }} .prop-card:hover .prop-icon {
    transform: scale({{ section.settings.icon_hover_scale }});
  }
  
  .value-propositions-{{ section.id }} .prop-card:hover .prop-icon img {
    transform: scale({{ section.settings.icon_image_hover_scale }});
  }
  
  .value-propositions-{{ section.id }} .prop-card h3 {
    font-size: {{ section.settings.title_font_size_desktop }}px;
    line-height: {{ section.settings.title_line_height }};
    font-weight: {{ section.settings.title_font_weight }};
    color: {{ section.settings.title_color }};
    margin-bottom: {{ section.settings.title_margin_bottom }}px;
    font-family: {{ section.settings.title_font_family }};
  }
  
  @media (max-width: 768px) {
    .value-propositions-{{ section.id }} .prop-card h3 {
      font-size: {{ section.settings.title_font_size_mobile }}px;
    }
  }
  
  .value-propositions-{{ section.id }} .prop-card p {
    font-size: {{ section.settings.description_font_size_desktop }}px;
    line-height: {{ section.settings.description_line_height }};
    color: {{ section.settings.description_color }};
    margin: 0;
    font-family: {{ section.settings.description_font_family }};
  }
  
  @media (max-width: 768px) {
    .value-propositions-{{ section.id }} .prop-card p {
      font-size: {{ section.settings.description_font_size_mobile }}px;
    }
  }
</style>

<section class="value-propositions value-propositions-{{ section.id }}" id="value-props-{{ section.id }}">
  <div class="container">
    <div class="props-grid">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'proposition' %}
            <div class="prop-card" {{ block.shopify_attributes }}>
              <div class="prop-icon">
                {% if block.settings.icon_image %}
                  <img src="{{ block.settings.icon_image | img_url: '200x200' }}" 
                       alt="{{ block.settings.title }}" 
                       loading="lazy">
                {% else %}
                  <div style="width: {{ section.settings.icon_image_size }}px; height: {{ section.settings.icon_image_size }}px; background: #f0f0f0; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #999; font-size: 12px; border: 1px dashed #ccc;">
                    Upload Icon
                  </div>
                {% endif %}
              </div>
              <h3>{{ block.settings.title }}</h3>
              <p>{{ block.settings.description }}</p>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const section = document.getElementById('value-props-{{ section.id }}');
  if (!section) return;

  const observerOptions = {
    root: null,
    rootMargin: '0px 0px -{{ section.settings.scroll_trigger_offset }}px 0px',
    threshold: {{ section.settings.scroll_trigger_threshold | divided_by: 100.0 }}
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const cards = entry.target.querySelectorAll('.prop-card');
        cards.forEach((card, index) => {
          setTimeout(() => {
            card.classList.add('animate-in');
          }, index * {{ section.settings.stagger_delay }});
        });
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);
  
  observer.observe(section);
});
</script>

{% schema %}
{
  "name": "Value Propositions",
  "tag": "section",
  "class": "section-value-propositions",
  "max_blocks": 8,
  "settings": [
    {
      "type": "header",
      "content": "Section Layout"
    },
    {
      "type": "range",
      "id": "section_padding_top_desktop",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Top padding (Desktop)",
      "default": 80
    },
    {
      "type": "range",
      "id": "section_padding_bottom_desktop",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Bottom padding (Desktop)",
      "default": 80
    },
    {
      "type": "range",
      "id": "section_padding_top_mobile",
      "min": 0,
      "max": 150,
      "step": 5,
      "unit": "px",
      "label": "Top padding (Mobile)",
      "default": 50
    },
    {
      "type": "range",
      "id": "section_padding_bottom_mobile",
      "min": 0,
      "max": 150,
      "step": 5,
      "unit": "px",
      "label": "Bottom padding (Mobile)",
      "default": 50
    },
    {
      "type": "color",
      "id": "section_background_color",
      "label": "Section background color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "container_max_width",
      "min": 1000,
      "max": 1600,
      "step": 50,
      "unit": "px",
      "label": "Container max width",
      "default": 1200
    },
    {
      "type": "range",
      "id": "container_padding",
      "min": 15,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Container side padding",
      "default": 20
    },
    {
      "type": "header",
      "content": "Grid Settings"
    },
    {
      "type": "range",
      "id": "grid_gap_desktop",
      "min": 10,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Grid gap (Desktop)",
      "default": 30
    },
    {
      "type": "range",
      "id": "grid_gap_tablet",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Grid gap (Tablet)",
      "default": 25
    },
    {
      "type": "range",
      "id": "grid_gap_mobile",
      "min": 10,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Grid gap (Mobile)",
      "default": 20
    },
    {
      "type": "header",
      "content": "Card Design"
    },
    {
      "type": "color",
      "id": "card_background_color",
      "label": "Card background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "card_hover_background_color",
      "label": "Card hover background color",
      "default": "#f7fafc"
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Card border radius",
      "default": 12
    },
    {
      "type": "range",
      "id": "card_padding_desktop",
      "min": 20,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Card padding (Desktop)",
      "default": 40
    },
    {
      "type": "range",
      "id": "card_padding_mobile",
      "min": 15,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Card padding (Mobile)",
      "default": 25
    },
    {
      "type": "select",
      "id": "card_text_alignment",
      "label": "Card text alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "card_content_alignment",
      "label": "Card content alignment",
      "options": [
        { "value": "flex-start", "label": "Top" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Bottom" }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "card_border_width",
      "min": 0,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Card border width",
      "default": 1
    },
    {
      "type": "color",
      "id": "card_border_color",
      "label": "Card border color",
      "default": "#e2e8f0"
    },
    {
      "type": "text",
      "id": "card_shadow",
      "label": "Card shadow",
      "default": "0 2px 10px rgba(0, 0, 0, 0.08)",
      "info": "CSS shadow property"
    },
    {
      "type": "text",
      "id": "card_hover_shadow",
      "label": "Card hover shadow",
      "default": "0 8px 30px rgba(0, 0, 0, 0.16)",
      "info": "CSS shadow property"
    },
    {
      "type": "range",
      "id": "card_hover_translate",
      "min": -20,
      "max": 0,
      "step": 1,
      "unit": "px",
      "label": "Card hover translate Y",
      "default": -5
    },
    {
      "type": "range",
      "id": "card_hover_transition",
      "min": 0.1,
      "max": 1.0,
      "step": 0.1,
      "unit": "s",
      "label": "Card hover transition duration",
      "default": 0.3
    },
    {
      "type": "header",
      "content": "Icon Settings"
    },
    {
      "type": "range",
      "id": "icon_image_size",
      "min": 30,
      "max": 150,
      "step": 5,
      "unit": "px",
      "label": "Icon image size",
      "default": 60
    },
    {
      "type": "range",
      "id": "icon_margin_bottom",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Icon margin bottom",
      "default": 25
    },
    {
      "type": "range",
      "id": "icon_hover_scale",
      "min": 1.0,
      "max": 2,
      "step": 0.1,
      "label": "Icon container hover scale",
      "default": 1.1
    },
    {
      "type": "range",
      "id": "icon_image_hover_scale",
      "min": 1.0,
      "max": 2,
      "step": 0.1,
      "label": "Icon image hover scale",
      "default": 1.1
    },
    {
      "type": "range",
      "id": "icon_hover_transition",
      "min": 0.1,
      "max": 1.0,
      "step": 0.1,
      "unit": "s",
      "label": "Icon hover transition",
      "default": 0.3
    },
    {
      "type": "header",
      "content": "Typography - Titles"
    },
    {
      "type": "font_picker",
      "id": "title_font_family",
      "label": "Title font family",
      "default": "helvetica_n4"
    },
    {
      "type": "range",
      "id": "title_font_size_desktop",
      "min": 16,
      "max": 48,
      "step": 1,
      "unit": "px",
      "label": "Title font size (Desktop)",
      "default": 20
    },
    {
      "type": "range",
      "id": "title_font_size_mobile",
      "min": 14,
      "max": 36,
      "step": 1,
      "unit": "px",
      "label": "Title font size (Mobile)",
      "default": 18
    },
    {
      "type": "select",
      "id": "title_font_weight",
      "label": "Title font weight",
      "options": [
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi Bold" },
        { "value": "700", "label": "Bold" },
        { "value": "800", "label": "Extra Bold" }
      ],
      "default": "600"
    },
    {
      "type": "range",
      "id": "title_line_height",
      "min": 1.0,
      "max": 2.0,
      "step": 0.1,
      "label": "Title line height",
      "default": 1.3
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#2d3748"
    },
    {
      "type": "range",
      "id": "title_margin_bottom",
      "min": 5,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Title margin bottom",
      "default": 12
    },
    {
      "type": "header",
      "content": "Typography - Descriptions"
    },
    {
      "type": "font_picker",
      "id": "description_font_family",
      "label": "Description font family",
      "default": "helvetica_n4"
    },
    {
      "type": "range",
      "id": "description_font_size_desktop",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Description font size (Desktop)",
      "default": 15
    },
    {
      "type": "range",
      "id": "description_font_size_mobile",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description font size (Mobile)",
      "default": 14
    },
    {
      "type": "range",
      "id": "description_line_height",
      "min": 1.0,
      "max": 2.0,
      "step": 0.1,
      "label": "Description line height",
      "default": 1.5
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description color",
      "default": "#718096"
    },
    {
      "type": "header",
      "content": "Animation Settings"
    },
    {
      "type": "range",
      "id": "animation_delay_base",
      "min": 0,
      "max": 1.0,
      "step": 0.1,
      "unit": "s",
      "label": "Base animation delay",
      "default": 0.2
    },
    {
      "type": "range",
      "id": "stagger_delay",
      "min": 50,
      "max": 300,
      "step": 25,
      "unit": "ms",
      "label": "Stagger delay between cards",
      "default": 150
    },
    {
      "type": "range",
      "id": "scroll_trigger_offset",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Scroll trigger offset",
      "default": 100,
      "info": "How far from bottom of viewport to trigger animation"
    },
    {
      "type": "range",
      "id": "scroll_trigger_threshold",
      "min": 10,
      "max": 100,
      "step": 10,
      "unit": "%",
      "label": "Scroll trigger threshold",
      "default": 20,
      "info": "Percentage of section that needs to be visible"
    }
  ],
  "blocks": [
    {
      "type": "proposition",
      "name": "Value Proposition",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Best Price Guarantee"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "We match or beat any competitor's price"
        },
        {
          "type": "image_picker",
          "id": "icon_image",
          "label": "Icon image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Value Propositions",
      "blocks": [
        {
          "type": "proposition",
          "settings": {
            "title": "Best Price Guarantee",
            "description": "We match or beat any competitor's price"
          }
        },
        {
          "type": "proposition",
          "settings": {
            "title": "100+ Trusted Brands",
            "description": "Every top name in commercial kitchen equipment"
          }
        },
        {
          "type": "proposition",
          "settings": {
            "title": "Free Nationwide Shipping",
            "description": "On select products with T&C applied"
          }
        },
        {
          "type": "proposition",
          "settings": {
            "title": "Premium Customer Service",
            "description": "Expert support from industry professionals"
          }
        }
      ]
    }
  ]
}
{% endschema %}