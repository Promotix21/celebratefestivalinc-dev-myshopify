{% comment %}
  FILE LOCATION: sections/product-webstaurant-style.liquid
  This is the main product template section
{% endcomment %}

<div class="product-webstaurant-container">
  <!-- Hero/Primary Product Section -->
  <div class="product-main-wrapper">
    <div class="product-content-left">
      <!-- Product Title & Reviews -->
      <div class="product-header">
        <h1 class="product-title">{{ product.title }}</h1>
        <div class="product-rating-wrapper">
          {% if product.metafields.reviews.rating %}
            <div class="product-stars">
              {% assign rating = product.metafields.reviews.rating | times: 1.0 %}
              {% assign rating_floor = rating | floor %}
              {% for i in (1..5) %}
                {% if i <= rating_floor %}
                  <span class="star filled">★</span>
                {% else %}
                  {% assign next_int = rating_floor | plus: 1 %}
                  {% if i == next_int %}
                    {% if rating != rating_floor %}
                      <span class="star half">★</span>
                    {% else %}
                      <span class="star empty">★</span>
                    {% endif %}
                  {% else %}
                    <span class="star empty">★</span>
                  {% endif %}
                {% endif %}
              {% endfor %}
            </div>
            <a href="#reviews-section" class="reviews-link">
              Read {{ product.metafields.reviews.count | default: 0 }} reviews
            </a>
          {% endif %}
          <span class="product-sku">Item #: {{ product.variants.first.sku }}</span>
        </div>
      </div>

      <!-- Main Product Image Gallery -->
      <div class="product-gallery-section">
        <div class="gallery-container">
          <div class="product-main-image">
            {% if product.featured_image %}
              <img src="{{ product.featured_image | img_url: '800x800' }}" 
                   alt="{{ product.featured_image.alt | escape }}"
                   id="main-product-image"
                   class="main-image"
                   width="800"
                   height="800"
                   loading="eager">
            {% endif %}
            <button class="zoom-button" aria-label="Click to expand">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
                <line x1="11" y1="8" x2="11" y2="14"></line>
                <line x1="8" y1="11" x2="14" y2="11"></line>
              </svg>
            </button>
          </div>

          <div class="product-thumbnail-gallery">
            {% for image in product.images limit: 8 %}
              <div class="thumbnail-item {% if forloop.first %}active{% endif %}" 
                   data-image-url="{{ image | img_url: '800x800' }}">
                <img src="{{ image | img_url: '100x100' }}" 
                     alt="{{ image.alt | escape }}"
                     width="100"
                     height="100"
                     loading="lazy">
              </div>
            {% endfor %}
            
            {% if product.metafields.custom.video_thumbnail %}
              <div class="thumbnail-item video-thumb">
                <img src="{{ product.metafields.custom.video_thumbnail | img_url: '100x100' }}" 
                     alt="Product Video"
                     width="100"
                     height="100"
                     loading="lazy">
                <span class="play-icon">▶</span>
              </div>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Share & Ask Question Buttons -->
      <div class="product-actions-bottom">
        <button class="btn-share" onclick="shareProduct()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="18" cy="5" r="3"></circle>
            <circle cx="6" cy="12" r="3"></circle>
            <circle cx="18" cy="19" r="3"></circle>
            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
          </svg>
          Share
        </button>
        <button class="btn-ask-question" onclick="openQuestionModal()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg>
          Ask a Question
        </button>
        <button class="btn-request-consultation" onclick="openConsultationForm()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
          Request Consultation
        </button>
      </div>
    </div>

    <!-- Purchase Panel (Right Sidebar) -->
    <div class="product-sidebar-right">
      <!-- Free Shipping Badge -->
      {% if product.metafields.custom.free_shipping %}
        <div class="free-shipping-badge">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <rect x="1" y="3" width="15" height="13"></rect>
            <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
            <circle cx="5.5" cy="18.5" r="2.5"></circle>
            <circle cx="18.5" cy="18.5" r="2.5"></circle>
          </svg>
          Free Shipping
          <span class="info-icon" title="Free shipping on qualifying orders">ℹ</span>
        </div>
      {% endif %}

      <!-- Pricing Section -->
      <div class="product-pricing-box">
        <div class="price-regular-box">
          <span class="price-label">Regularly</span>
          <span class="price-amount">${{ product.price | money_without_currency }}</span>
          <span class="price-unit">/Each</span>
        </div>

        <!-- Member Price Box - Conditional Display -->
        <div class="price-member-box">
          <span class="member-badge">plus</span>
          <span class="price-label">Member Price</span>
          {% if customer %}
            {% assign member_price = product.metafields.custom.member_price | default: product.price %}
            <span class="price-amount member-price">${{ member_price | money_without_currency }}</span>
            <span class="price-unit">/Each</span>
            <a href="{{ routes.root_url }}pages/plus-membership" class="signup-link">Sign up for Plus</a>
          {% else %}
            <div class="price-blurred-container">
              <span class="blurred-text">$•,•••.••</span>
              <span class="price-unit blurred-unit">/Each</span>
              <div class="login-overlay">
                <a href="{{ routes.account_login_url }}" class="login-overlay-link">Login to see<br>member price</a>
              </div>
            </div>
          {% endif %}
        </div>
      </div>

      <!-- Installment Options -->
      {% if product.metafields.custom.enable_installments %}
        <div class="installment-info">
          <span>4 interest-free payments of</span>
          <strong>${{ product.price | divided_by: 4 | money_without_currency }}</strong>
          <a href="#" class="apply-link">Apply Now ›</a>
          <img src="https://cdn.shopify.com/s/files/1/0000/0000/files/credit-key-logo.png" 
               alt="Credit Key" 
               class="credit-logo"
               width="80"
               height="16"
               loading="lazy">
        </div>
      {% endif %}

      <!-- Ships Free With Plus -->
      {% if product.metafields.custom.plus_free_shipping %}
        <div class="ships-free-plus">
          Ships free with <span class="plus-badge-inline">plus</span>
        </div>
      {% endif %}

      <!-- Accessories & Options -->
      {% if product.metafields.custom.accessories %}
        <div class="accessories-section">
          <label class="section-label">Accessories & Options</label>
          <select class="accessory-select">
            <option>{{ product.metafields.custom.default_accessory | default: 'Select an option' }}</option>
            {% assign accessories = product.metafields.custom.accessories | split: ',' %}
            {% for accessory in accessories %}
              <option value="{{ accessory | strip }}">{{ accessory | strip }}</option>
            {% endfor %}
          </select>
        </div>
      {% endif %}

    <!-- What We Offer - ALWAYS SHOW -->
<div class="what-we-offer-section">
  <h3 class="section-label">What We Offer</h3>
  <div class="protection-offer">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
    </svg>
    <div class="offer-text">
      <strong>Protect Your Product</strong>
      {% assign protection_price = product.price | times: 0.1 | divided_by: 100 %}
      <p>Coverage starting at ${{ protection_price | default: '46.49' | money_without_currency }}</p>
    </div>
    <span class="info-icon" title="Click for details">ℹ</span>
    <button class="btn-add-protection" onclick="openProtectionModal()">Add Protection</button>
  </div>
</div>

      <!-- Variant Selector (if applicable) -->
      {% unless product.has_only_default_variant %}
        <div class="variant-selector-section">
          {% for option in product.options_with_values %}
            <div class="option-group">
              <label>{{ option.name }}:</label>
              <div class="option-values">
                {% for value in option.values %}
                  <input type="radio" 
                         name="option-{{ option.position }}" 
                         value="{{ value | escape }}" 
                         id="option-{{ option.position }}-{{ forloop.index }}"
                         {% if option.selected_value == value %}checked{% endif %}>
                  <label for="option-{{ option.position }}-{{ forloop.index }}" class="option-label">
                    {{ value }}
                  </label>
                {% endfor %}
              </div>
            </div>
          {% endfor %}
        </div>
      {% endunless %}

      <!-- Quantity & Add to Cart -->
      <div class="quantity-cart-section">
        <div class="quantity-selector">
          <button class="qty-btn minus" onclick="decreaseQuantity()">−</button>
          <input type="number" name="quantity" value="1" min="1" class="qty-input" id="quantity-input">
          <button class="qty-btn plus" onclick="increaseQuantity()">+</button>
        </div>
        
        <button type="submit" 
                name="add" 
                class="btn-add-to-cart"
                onclick="addToCart(event)">
          <span class="btn-text">Add to Cart</span>
          <span class="loading-spinner hidden">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10" stroke-opacity="0.25"></circle>
              <path d="M12 2a10 10 0 0 1 10 10" stroke-width="3"></path>
            </svg>
          </span>
        </button>
      </div>

      <!-- Rewards Info -->
      {% if product.metafields.custom.rewards_enabled %}
        <div class="rewards-info">
          <img src="https://cdn.shopify.com/s/files/1/0000/0000/files/rewards-card.png" 
               alt="Rewards" 
               class="rewards-icon"
               width="24"
               height="24"
               loading="lazy">
          <span>Earn up to <strong>${{ product.price | times: 0.03 | money_without_currency }}</strong> back</span>
          <span class="points-text">({{ product.price | times: 3 | round }} points)</span>
          <a href="#" class="rewards-link">with Webstaurant Rewards Visa® Credit Card</a>
        </div>
      {% endif %}

      <!-- Add to Wish List -->
      <button class="btn-wishlist" onclick="addToWishlist()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        Add to Wish List
      </button>

      <!-- Size Selection (if applicable) -->
      {% if product.metafields.custom.size_options %}
        <div class="size-selection-section">
          <label class="section-label">Size: <span id="selected-size">{{ product.metafields.custom.default_size }}</span></label>
          <div class="size-options">
            {% assign sizes = product.metafields.custom.size_options | split: '|' %}
            {% for size in sizes %}
              {% assign size_parts = size | split: ':' %}
              <label class="size-option {% if forloop.first %}selected{% endif %}">
                <input type="radio" name="size" value="{{ size_parts[0] }}" {% if forloop.first %}checked{% endif %}>
                <span class="size-label">{{ size_parts[0] }}</span>
                {% if size_parts[1] %}
                  <span class="size-dimensions">({{ size_parts[1] }})</span>
                {% endif %}
                <svg class="checkmark" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
              </label>
            {% endfor %}
          </div>
        </div>
      {% endif %}
    </div>
  </div>

 <!-- Works With / Cross-Sell Section -->
<div class="works-with-section">
  <h2 class="section-title">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
      <path d="M9 11l3 3 8-8"></path>
      <path d="M20 12v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h10"></path>
    </svg>
    Works With
    <a href="#" class="view-all-link">View All Items</a>
  </h2>
  
  <div class="works-with-carousel">
    {% assign displayed_count = 0 %}
    
    {% comment %} First: Try metafield products {% endcomment %}
    {% if product.metafields.custom.works_with_products %}
      {% assign related_handles = product.metafields.custom.works_with_products | split: ',' %}
      {% for handle in related_handles limit: 4 %}
        {% assign handle_clean = handle | strip %}
        {% assign related_product = all_products[handle_clean] %}
        {% if related_product and related_product.available %}
          {% include 'cross-sell-card', product: related_product %}
          {% assign displayed_count = displayed_count | plus: 1 %}
        {% endif %}
      {% endfor %}
    {% endif %}
    
    {% comment %} Fallback 1: Same collection {% endcomment %}
    {% if displayed_count < 4 %}
      {% for collection in product.collections limit: 1 %}
        {% for related_product in collection.products %}
          {% if related_product.id != product.id and related_product.available and displayed_count < 4 %}
            {% include 'cross-sell-card', product: related_product %}
            {% assign displayed_count = displayed_count | plus: 1 %}
          {% endif %}
        {% endfor %}
      {% endfor %}
    {% endif %}
    
    {% comment %} Fallback 2: Same vendor {% endcomment %}
    {% if displayed_count < 4 and product.vendor %}
      {% assign vendor_products = collections.all.products | where: 'vendor', product.vendor %}
      {% for related_product in vendor_products %}
        {% if related_product.id != product.id and related_product.available and displayed_count < 4 %}
          {% include 'cross-sell-card', product: related_product %}
          {% assign displayed_count = displayed_count | plus: 1 %}
        {% endif %}
      {% endfor %}
    {% endif %}
    
    {% comment %} Fallback 3: Recently viewed or popular products {% endcomment %}
    {% if displayed_count < 4 %}
      {% for related_product in collections.all.products limit: 10 %}
        {% if related_product.id != product.id and related_product.available and displayed_count < 4 %}
          {% include 'cross-sell-card', product: related_product %}
          {% assign displayed_count = displayed_count | plus: 1 %}
        {% endif %}
      {% endfor %}
    {% endif %}
    
    <button class="carousel-nav next" onclick="scrollCarousel('next', 'works-with')">›</button>
  </div>
</div>

 <!-- Items You Might Like Section -->
<div class="items-you-might-like">
  <h2 class="section-title">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <circle cx="12" cy="12" r="3"></circle>
      <path d="M12 1v6m0 6v6m8.66-15.66l-4.24 4.24m-4.24 4.24l-4.24 4.24M23 12h-6m-6 0H1m20.66 8.66l-4.24-4.24m-4.24-4.24l-4.24-4.24"></path>
    </svg>
    Items You Might Like
  </h2>
  
  <div class="related-items-carousel">
    {% assign rec_count = 0 %}
    
    {% comment %} First: Try Shopify recommendations {% endcomment %}
    {% if recommendations.products_count > 0 %}
      {% for related_product in recommendations.products limit: 6 %}
        {% if related_product.available %}
          {% include 'recommendation-card', product: related_product %}
          {% assign rec_count = rec_count | plus: 1 %}
        {% endif %}
      {% endfor %}
    {% endif %}
    
    {% comment %} Fallback: Collection products {% endcomment %}
    {% if rec_count < 6 %}
      {% for collection in product.collections limit: 1 %}
        {% for related_product in collection.products %}
          {% if related_product.id != product.id and related_product.available and rec_count < 6 %}
            {% include 'recommendation-card', product: related_product %}
            {% assign rec_count = rec_count | plus: 1 %}
          {% endif %}
        {% endfor %}
      {% endfor %}
    {% endif %}
    
    {% comment %} Final fallback: Any products {% endcomment %}
    {% if rec_count < 6 %}
      {% for related_product in collections.all.products limit: 10 %}
        {% if related_product.id != product.id and related_product.available and rec_count < 6 %}
          {% include 'recommendation-card', product: related_product %}
          {% assign rec_count = rec_count | plus: 1 %}
        {% endif %}
      {% endfor %}
    {% endif %}
    
    <button class="carousel-nav next" onclick="scrollCarousel('next', 'recommendations')">›</button>
  </div>
</div>

  <!-- Product Content Area with Tabs -->
  <div class="product-detailed-content">
    <div class="content-main">
      <!-- Product Description with Rich Text -->
      <div class="product-description-block">
        <h2 class="content-heading">{{ product.metafields.custom.description_heading | default: product.title }}</h2>
        
        {% if product.metafields.custom.key_features %}
          <ul class="key-features-list">
            {% assign features = product.metafields.custom.key_features | split: '|' %}
            {% for feature in features %}
              <li>{{ feature }}</li>
            {% endfor %}
          </ul>
        {% endif %}

        <div class="description-text">
          {{ product.description }}
        </div>

        {% if product.metafields.custom.why_buy_link %}
          <a href="{{ product.metafields.custom.why_buy_link }}" class="cta-link">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 6v6l4 2"></path>
            </svg>
            Why Buy from CelebrateRestaurantInc.com?
          </a>
        {% endif %}

        {% if product.metafields.custom.support_links %}
          <div class="support-links-section">
            {% assign links = product.metafields.custom.support_links | split: '|' %}
            {% for link in links %}
              {% assign link_parts = link | split: ':' %}
              <a href="{{ link_parts[1] }}" class="support-link">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                  <polyline points="14 2 14 8 20 8"></polyline>
                </svg>
                {{ link_parts[0] }}
              </a>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      <!-- Detailed Feature Sections with Images -->
      {% if product.metafields.custom.feature_sections %}
        <div class="feature-sections-detailed">
          {% assign sections = product.metafields.custom.feature_sections | split: '||' %}
          {% for section in sections %}
            {% assign section_data = section | split: '|' %}
            <div class="feature-block">
              <div class="feature-image">
                <img src="{{ section_data[2] }}" 
                     alt="{{ section_data[0] }}"
                     width="300"
                     height="300"
                     loading="lazy">
              </div>
              <div class="feature-content">
                <h3>{{ section_data[0] }}</h3>
                <p>{{ section_data[1] }}</p>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Certifications & Compliance -->
      {% if product.metafields.custom.certifications %}
        <div class="certifications-section">
          <div class="cert-badges">
            {% assign certs = product.metafields.custom.certifications | split: ',' %}
            {% for cert in certs %}
              <div class="cert-badge">
                <img src="{{ cert | strip }}" 
                     alt="Certification"
                     width="80"
                     height="60"
                     loading="lazy">
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
    </div>

    <!-- Sidebar Modules -->
    <div class="content-sidebar">
      <!-- Installation Services -->
      {% if product.metafields.custom.installation_available %}
        <div class="sidebar-module installation-module">
          <h3 class="module-title">Installation Services</h3>
          <p>Check if installation is currently available for your area</p>
          <div class="zip-input-group">
            <input type="text" placeholder="Enter ZIP Code" class="zip-input">
            <button class="btn-check-zip">›</button>
          </div>
        </div>
      {% endif %}

    <!-- Shipping & Availability - ALWAYS SHOW -->
<div class="sidebar-module shipping-module">
  <h3 class="module-title">Shipping & Availability</h3>
  {% if product.available %}
    {% if product.metafields.custom.ships_in_days %}
      <p class="ships-in">Ships in {{ product.metafields.custom.ships_in_days }} business days</p>
    {% else %}
      <p class="ships-in">Ships in 1-3 business days</p>
    {% endif %}
  {% else %}
    <p>Currently unavailable. Contact us for restocking information.</p>
  {% endif %}
  {% if product.variants.first.weight > 0 %}
    <p class="shipping-weight">Weight: {{ product.variants.first.weight | weight_with_unit }}</p>
  {% endif %}
  <span class="info-icon" title="Shipping times may vary">ℹ</span>
</div>

<!-- Product Overview - ALWAYS SHOW -->
<div class="sidebar-module overview-module">
  <h3 class="module-title">Product Overview</h3>
  <ul class="overview-list">
    {% if product.metafields.custom.overview_features %}
      {% assign overview_items = product.metafields.custom.overview_features | split: '|' %}
      {% for item in overview_items %}
        <li>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          {{ item }}
        </li>
      {% endfor %}
    {% else %}
      {% comment %} Default features based on product type {% endcomment %}
      <li>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        {{ product.type }} - {{ product.title }}
      </li>
      {% if product.vendor %}
        <li>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Manufactured by {{ product.vendor }}
        </li>
      {% endif %}
      {% if product.available %}
        <li>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          In Stock - Ready to Ship
        </li>
      {% endif %}
      <li>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        SKU: {{ product.variants.first.sku | default: product.id }}
      </li>
    {% endif %}
  </ul>
</div>

      <!-- Quality Rating & UPC -->
      <div class="sidebar-module quality-module">
        <div class="quality-row">
          <span class="label">Quality Rating:</span>
          <span class="badge quality-badge">{{ product.metafields.custom.quality_rating | default: 'Better' }}</span>
        </div>
        <div class="upc-row">
          <span class="label">UPC Code:</span>
          <span class="value">{{ product.variants.first.barcode | default: 'N/A' }}</span>
        </div>
      </div>

      <!-- Brand Logo -->
      {% if product.vendor %}
        <div class="sidebar-module brand-module">
          {% if product.metafields.custom.brand_logo %}
            <img src="{{ product.metafields.custom.brand_logo }}" 
                 alt="{{ product.vendor }}" 
                 class="brand-logo"
                 width="200"
                 height="80"
                 loading="lazy">
          {% else %}
            <h3 class="brand-name">{{ product.vendor }}</h3>
          {% endif %}
          <a href="/collections/vendors?q={{ product.vendor | url_encode }}" class="view-all-brand">
            View all {{ product.vendor }} Products
          </a>
        </div>
      {% endif %}

      <!-- Parts & Accessories -->
      {% if product.metafields.custom.has_parts %}
        <div class="sidebar-module parts-module">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6"></path>
          </svg>
          <h3 class="module-title">Need Parts & Accessories?</h3>
          <p>Shop replacement parts and accessories for this item today!</p>
          <button class="btn-find-parts" onclick="toggleSpareParts()">Find Parts for this Item</button>
          
          <!-- Spare Parts List -->
          <div class="spare-parts-list" id="spare-parts-list" style="display: none;">
            {% if product.metafields.custom.spare_parts_products %}
              {% assign spare_parts = product.metafields.custom.spare_parts_products | split: ',' %}
              {% for part_handle in spare_parts %}
                {% assign handle_clean = part_handle | strip %}
                {% assign spare_part = all_products[handle_clean] %}
                {% if spare_part %}
                  <div class="spare-part-item">
                    <img src="{{ spare_part.featured_image | img_url: '60x60' }}" 
                         alt="{{ spare_part.title }}"
                         width="60"
                         height="60"
                         loading="lazy">
                    <div class="spare-part-info">
                      <h4>{{ spare_part.title | truncate: 40 }}</h4>
                      <p class="spare-part-price">${{ spare_part.price | money_without_currency }}</p>
                      <button class="btn-add-spare-part" data-product-id="{{ spare_part.variants.first.id }}">Add</button>
                    </div>
                  </div>
                {% endif %}
              {% endfor %}
            {% else %}
              <p class="no-parts-message">No spare parts configured. Contact us for availability.</p>
            {% endif %}
          </div>
        </div>
      {% endif %}

<!-- Resources and Downloads - ALWAYS SHOW with defaults -->
<div class="sidebar-module resources-module">
  <h3 class="module-title">Resources and Downloads</h3>
  <div class="resource-grid">
    {% assign has_docs = false %}
    
    {% if product.metafields.custom.spec_sheet %}
      {% assign has_docs = true %}
      <a href="{{ product.metafields.custom.spec_sheet }}" class="resource-card" target="_blank" onclick="previewDocument(event, '{{ product.metafields.custom.spec_sheet }}', 'Spec Sheet')">
        <div class="resource-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
          </svg>
        </div>
        <span>Specsheet</span>
      </a>
    {% endif %}
    
    {% if product.metafields.custom.manual %}
      {% assign has_docs = true %}
      <a href="{{ product.metafields.custom.manual }}" class="resource-card" target="_blank" onclick="previewDocument(event, '{{ product.metafields.custom.manual }}', 'Manual')">
        <div class="resource-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
          </svg>
        </div>
        <span>Manual</span>
      </a>
    {% endif %}
    
    {% if product.metafields.custom.warranty_doc %}
      {% assign has_docs = true %}
      <a href="{{ product.metafields.custom.warranty_doc }}" class="resource-card" target="_blank" onclick="previewDocument(event, '{{ product.metafields.custom.warranty_doc }}', 'Warranty')">
        <div class="resource-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
          </svg>
        </div>
        <span>Warranty</span>
      </a>
    {% endif %}
    
    {% unless has_docs %}
      {% comment %} Show generic resource links if no docs {% endcomment %}
      <a href="/pages/contact" class="resource-card">
        <div class="resource-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg>
        </div>
        <span>Request Info</span>
      </a>
      
      <a href="/pages/support" class="resource-card">
        <div class="resource-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
        </div>
        <span>Support</span>
      </a>
    {% endunless %}
  </div>
  <p class="pdf-note">{% if has_docs %}Click to preview or download. A PDF viewer is required.{% else %}Contact us for product documentation.{% endif %}</p>
</div>

     <!-- Warranty Info - ALWAYS SHOW -->
<div class="sidebar-module warranty-module">
  <h3 class="module-title">Warranty Info</h3>
  <div class="warranty-text">
    {{ product.metafields.custom.warranty_text | default: '1 Year Parts & Labor Warranty. Extended warranties available. Contact us for details.' }}
  </div>
  <a href="/pages/warranty" class="view-warranty-link">View Full Warranty Details</a>
</div>

      <!-- Additional Resources Links -->
      {% if product.metafields.custom.resource_links %}
        <div class="sidebar-module additional-resources">
          <h3 class="module-title">Resources</h3>
          <ul class="resource-links">
            {% assign resource_links = product.metafields.custom.resource_links | split: '|' %}
            {% for link in resource_links %}
              {% assign link_data = link | split: ':' %}
              <li>
                <a href="{{ link_data[1] }}" target="_blank">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                    <polyline points="15 3 21 3 21 9"></polyline>
                    <line x1="10" y1="14" x2="21" y2="3"></line>
                  </svg>
                  {{ link_data[0] }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
    </div>
  </div>

  <!-- Related Items Section -->
  <div class="related-items-section">
    <h2 class="section-title">Related Items</h2>
    <div class="related-categories-carousel">
      {% if product.metafields.custom.related_categories %}
        {% assign categories = product.metafields.custom.related_categories | split: '|' %}
        {% for category in categories %}
          {% assign cat_data = category | split: ':' %}
          <a href="{{ cat_data[2] }}" class="category-card">
            <img src="{{ cat_data[1] }}" 
                 alt="{{ cat_data[0] }}"
                 width="200"
                 height="120"
                 loading="lazy">
            <h3>{{ cat_data[0] }}</h3>
            <p>{{ cat_data[3] }} Products</p>
          </a>
        {% endfor %}
      {% endif %}
      <button class="carousel-nav next" onclick="scrollCarousel('next', 'related-categories')">›</button>
    </div>
  </div>

  <!-- Customer Reviews Section -->
  <div class="customer-reviews-section" id="reviews-section">
    <h2 class="section-title">Customer Reviews</h2>
    
    <div class="reviews-summary-container">
      <!-- Overall Rating -->
      <div class="reviews-summary-left">
        <div class="overall-rating-number">
          {{ product.metafields.reviews.rating | default: 2.9 }}
        </div>
        <div class="overall-rating-stars">
          {% assign rating = product.metafields.reviews.rating | default: 2.9 | times: 1.0 %}
          {% assign rating_floor = rating | floor %}
          {% for i in (1..5) %}
            {% if i <= rating_floor %}
              <span class="star filled large">★</span>
            {% else %}
              {% assign next_int = rating_floor | plus: 1 %}
              {% if i == next_int %}
                {% if rating != rating_floor %}
                  <span class="star half large">★</span>
                {% else %}
                  <span class="star empty large">★</span>
                {% endif %}
              {% else %}
                <span class="star empty large">★</span>
              {% endif %}
            {% endif %}
          {% endfor %}
        </div>
        <p class="review-count">{{ product.metafields.reviews.count | default: 30 }} Customer Reviews</p>
      </div>

      <!-- Rating Breakdown -->
      <div class="reviews-summary-right">
        <div class="rating-bar-row">
          <span class="rating-number">5 <span class="star">★</span></span>
          <div class="rating-bar">
            <div class="rating-bar-fill" style="width: {{ product.metafields.reviews.five_star_percent | default: 33 }}%"></div>
          </div>
          <span class="rating-count">{{ product.metafields.reviews.five_star_count | default: 10 }}</span>
        </div>
        
        <div class="rating-bar-row">
          <span class="rating-number">4 <span class="star">★</span></span>
          <div class="rating-bar">
            <div class="rating-bar-fill" style="width: {{ product.metafields.reviews.four_star_percent | default: 13 }}%"></div>
          </div>
          <span class="rating-count">{{ product.metafields.reviews.four_star_count | default: 4 }}</span>
        </div>
        
        <div class="rating-bar-row">
          <span class="rating-number">3 <span class="star">★</span></span>
          <div class="rating-bar">
            <div class="rating-bar-fill" style="width: {{ product.metafields.reviews.three_star_percent | default: 3 }}%"></div>
          </div>
          <span class="rating-count">{{ product.metafields.reviews.three_star_count | default: 1 }}</span>
        </div>
        
        <div class="rating-bar-row">
          <span class="rating-number">2 <span class="star">★</span></span>
          <div class="rating-bar">
            <div class="rating-bar-fill" style="width: {{ product.metafields.reviews.two_star_percent | default: 7 }}%"></div>
          </div>
          <span class="rating-count">{{ product.metafields.reviews.two_star_count | default: 2 }}</span>
        </div>
        
        <div class="rating-bar-row">
          <span class="rating-number">1 <span class="star">★</span></span>
          <div class="rating-bar">
            <div class="rating-bar-fill" style="width: {{ product.metafields.reviews.one_star_percent | default: 43 }}%"></div>
          </div>
          <span class="rating-count">{{ product.metafields.reviews.one_star_count | default: 13 }}</span>
        </div>
      </div>
    </div>

    <!-- Reviews List - Placeholder for reviews app integration -->
    <div id="shopify-product-reviews" data-id="{{ product.id }}">
      <!-- Reviews app will inject content here -->
    </div>
  </div>
</div>

<style>
/* FILE LOCATION: assets/product-webstaurant-style.css */

/* ============================
   VARIABLES - Your Brand Colors
   ============================ */
:root {
  --color-primary: #FF7B7B;
  --color-primary-hover: #FF6666;
  --color-primary-dark: #E66A6A;
  --color-secondary: #00A8CC;
  --color-navy: #1E3A5F;
  --color-navy-dark: #162A45;
  --color-text: #333333;
  --color-text-light: #666666;
  --color-border: #E0E0E0;
  --color-bg-light: #F8F8F8;
  --color-success: #4CAF50;
  --color-warning: #FF9800;
  --color-error: #F44336;
  --color-white: #FFFFFF;
  
  --font-main: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --font-heading: 'Helvetica Neue', Arial, sans-serif;
  
  --border-radius: 4px;
  --border-radius-lg: 8px;
  --transition: all 0.3s ease;
}

/* ============================
   MAIN CONTAINER
   ============================ */
.product-webstaurant-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 20px;
  font-family: var(--font-main);
  color: var(--color-text);
}

/* ============================
   HERO/PRIMARY PRODUCT SECTION
   ============================ */
.product-main-wrapper {
  display: grid;
  grid-template-columns: 1fr 400px;
  gap: 40px;
  margin-bottom: 40px;
}

/* Product Header */
.product-header {
  margin-bottom: 20px;
}

.product-title {
  font-size: 28px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 10px 0;
  line-height: 1.3;
}

.product-rating-wrapper {
  display: flex;
  align-items: center;
  gap: 15px;
  flex-wrap: wrap;
}

.product-stars {
  display: flex;
  gap: 2px;
}

.star {
  color: #DDD;
  font-size: 18px;
}

.star.filled {
  color: #FFB800;
}

.reviews-link {
  color: var(--color-secondary);
  text-decoration: underline;
  font-size: 14px;
}

.product-sku {
  color: var(--color-text-light);
  font-size: 14px;
}

/* Product Gallery */
.product-gallery-section {
  position: relative;
  margin-bottom: 20px;
}

.gallery-container {
  display: grid;
  grid-template-columns: 1fr 110px;
  gap: 15px;
}

.product-main-image {
  position: relative;
  background: var(--color-white);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  padding: 20px;
  min-height: 500px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.main-image {
  max-width: 100%;
  max-height: 500px;
  object-fit: contain;
}

.zoom-button {
  position: absolute;
  top: 15px;
  right: 15px;
  background: var(--color-white);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  padding: 8px;
  cursor: pointer;
  transition: var(--transition);
}

.zoom-button:hover {
  background: var(--color-bg-light);
}

/* Thumbnail Gallery - Vertical on Right */
.product-thumbnail-gallery {
  display: flex;
  flex-direction: column;
  gap: 10px;
  overflow-y: auto;
  max-height: 540px;
  padding-right: 5px;
}

.product-thumbnail-gallery::-webkit-scrollbar {
  width: 6px;
}

.product-thumbnail-gallery::-webkit-scrollbar-track {
  background: var(--color-bg-light);
  border-radius: 3px;
}

.product-thumbnail-gallery::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 3px;
}

.product-thumbnail-gallery::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-light);
}

.thumbnail-item {
  flex-shrink: 0;
  width: 100px;
  height: 100px;
  border: 2px solid var(--color-border);
  border-radius: var(--border-radius);
  padding: 5px;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-white);
  position: relative;
}

.thumbnail-item:hover,
.thumbnail-item.active {
  border-color: var(--color-primary);
}

.thumbnail-item img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.thumbnail-item.video-thumb .play-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  color: var(--color-white);
  background: rgba(0, 0, 0, 0.6);
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

/* Product Actions Bottom */
.product-actions-bottom {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin-top: 20px;
}

.btn-share,
.btn-ask-question,
.btn-request-consultation {
  padding: 10px 15px;
  border: 1px solid var(--color-border);
  background: var(--color-white);
  border-radius: var(--border-radius);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  font-size: 13px;
  font-weight: 500;
  transition: var(--transition);
}

.btn-share:hover,
.btn-ask-question:hover,
.btn-request-consultation:hover {
  background: var(--color-bg-light);
  border-color: var(--color-text-light);
}

/* ============================
   PURCHASE PANEL (RIGHT SIDEBAR)
   ============================ */
.product-sidebar-right {
  background: var(--color-white);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-lg);
  padding: 20px;
}

/* Free Shipping Badge */
.free-shipping-badge {
  background: var(--color-navy);
  color: var(--color-white);
  padding: 10px 15px;
  border-radius: var(--border-radius);
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 20px;
}

.free-shipping-badge svg {
  fill: var(--color-white);
}

.info-icon {
  margin-left: auto;
  width: 18px;
  height: 18px;
  border: 1px solid currentColor;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  cursor: help;
}

/* Pricing Section */
.product-pricing-box {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin-bottom: 20px;
}

.price-regular-box,
.price-member-box {
  border: 2px solid var(--color-border);
  border-radius: var(--border-radius);
  padding: 15px;
  text-align: center;
  min-height: 120px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.price-regular-box {
  background: var(--color-white);
}

.price-member-box {
  background: #E8F4F8;
  border-color: var(--color-secondary);
  position: relative;
}

.member-badge {
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--color-secondary);
  color: var(--color-white);
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 700;
  text-transform: lowercase;
  font-style: italic;
}

.price-label {
  display: block;
  font-size: 12px;
  color: var(--color-text-light);
  margin-bottom: 5px;
  font-weight: 500;
}

.price-amount {
  display: inline-block;
  font-size: 32px;
  font-weight: 700;
  color: var(--color-primary);
  line-height: 1;
}

.price-member-box .price-amount {
  color: var(--color-secondary);
}

.price-unit {
  font-size: 14px;
  color: var(--color-text);
  font-weight: 400;
}

.signup-link {
  display: block;
  margin-top: 8px;
  font-size: 13px;
  color: var(--color-secondary);
  text-decoration: underline;
}

/* Blurred Price with Overlay for Non-Logged In Users */
.price-blurred-container {
  position: relative;
  display: inline-block;
  margin: 10px 0;
}

.blurred-text {
  filter: blur(6px);
  user-select: none;
  font-size: 32px;
  font-weight: 700;
  color: var(--color-secondary);
  display: inline-block;
}

.blurred-unit {
  filter: blur(4px);
  user-select: none;
}

.login-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 10;
  pointer-events: all;
}

.login-overlay-link {
  background: rgba(0, 168, 204, 0.95);
  color: white;
  padding: 8px 16px;
  border-radius: 4px;
  text-decoration: none;
  font-size: 13px;
  font-weight: 600;
  white-space: nowrap;
  display: block;
  text-align: center;
  line-height: 1.4;
  transition: var(--transition);
}

.login-overlay-link:hover {
  background: var(--color-secondary);
  transform: scale(1.05);
}

/* Installment Info */
.installment-info {
  background: var(--color-bg-light);
  padding: 12px;
  border-radius: var(--border-radius);
  font-size: 13px;
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.installment-info strong {
  color: var(--color-text);
  font-weight: 600;
}

.apply-link {
  color: var(--color-secondary);
  text-decoration: none;
  font-weight: 600;
}

.credit-logo {
  height: 16px;
  margin-left: auto;
}

/* Ships Free with Plus */
.ships-free-plus {
  text-align: center;
  font-size: 13px;
  color: var(--color-text-light);
  margin-bottom: 15px;
}

.plus-badge-inline {
  background: var(--color-secondary);
  color: var(--color-white);
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 700;
  font-style: italic;
}

/* Accessories Section */
.accessories-section {
  margin-bottom: 20px;
}

.section-label {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 8px;
}

.accessory-select {
  width: 100%;
  padding: 10px;
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  font-size: 14px;
  background: var(--color-white);
  cursor: pointer;
}

/* What We Offer Section */
.what-we-offer-section {
  margin-bottom: 20px;
}

.protection-offer {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 15px;
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  background: var(--color-white);
}

.protection-offer svg {
  width: 32px;
  height: 32px;
  color: var(--color-success);
}

.offer-text strong {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.offer-text p {
  font-size: 13px;
  color: var(--color-text-light);
  margin: 0;
}

.btn-add-protection {
  grid-column: 2 / 4;
  padding: 8px 16px;
  background: var(--color-success);
  color: var(--color-white);
  border: none;
  border-radius: var(--border-radius);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
}

.btn-add-protection:hover {
  background: #45A049;
}

/* Variant Selector */
.variant-selector-section {
  margin-bottom: 20px;
}

.option-group {
  margin-bottom: 15px;
}

.option-group label {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 8px;
  display: block;
}

.option-values {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.option-values input[type="radio"] {
  display: none;
}

.option-label {
  padding: 10px 16px;
  border: 2px solid var(--color-border);
  border-radius: var(--border-radius);
  cursor: pointer;
  font-size: 14px;
  transition: var(--transition);
  background: var(--color-white);
}

.option-values input[type="radio"]:checked + .option-label {
  border-color: var(--color-primary);
  background: var(--color-bg-light);
  font-weight: 600;
}

/* Quantity & Add to Cart */
.quantity-cart-section {
  display: grid;
  grid-template-columns: 120px 1fr;
  gap: 15px;
  margin-bottom: 20px;
}

.quantity-selector {
  display: flex;
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  overflow: hidden;
}

.qty-btn {
  width: 40px;
  border: none;
  background: var(--color-bg-light);
  cursor: pointer;
  font-size: 18px;
  font-weight: 600;
  transition: var(--transition);
}

.qty-btn:hover {
  background: var(--color-border);
}

.qty-input {
  flex: 1;
  border: none;
  text-align: center;
  font-size: 16px;
  font-weight: 600;
  border-left: 1px solid var(--color-border);
  border-right: 1px solid var(--color-border);
}

/* Remove spinner from number input */
.qty-input::-webkit-outer-spin-button,
.qty-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.btn-add-to-cart {
  padding: 14px 24px;
  background: var(--color-primary);
  color: var(--color-white);
  border: none;
  border-radius: var(--border-radius);
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-add-to-cart:hover {
  background: var(--color-primary-hover);
}

.btn-add-to-cart.loading {
  pointer-events: none;
  opacity: 0.7;
}

.loading-spinner {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.hidden {
  display: none !important;
}

/* Rewards Info */
.rewards-info {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--color-text-light);
  margin-bottom: 15px;
  padding: 10px;
  background: var(--color-bg-light);
  border-radius: var(--border-radius);
  flex-wrap: wrap;
}

.rewards-icon {
  height: 24px;
}

.points-text {
  color: var(--color-text-light);
}

.rewards-link {
  color: var(--color-secondary);
  text-decoration: underline;
}

/* Wishlist Button */
.btn-wishlist {
  width: 100%;
  padding: 12px;
  border: 1px solid var(--color-border);
  background: var(--color-white);
  border-radius: var(--border-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
  margin-bottom: 20px;
}

.btn-wishlist:hover {
  background: var(--color-bg-light);
  border-color: var(--color-primary);
}

/* Size Selection */
.size-selection-section {
  margin-bottom: 20px;
}

.size-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.size-option {
  position: relative;
  padding: 12px 16px;
  border: 2px solid var(--color-border);
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.size-option input[type="radio"] {
  display: none;
}

.size-option:hover {
  border-color: var(--color-primary);
}

.size-option.selected {
  border-color: var(--color-success);
  background: #F0F8F0;
}

.size-label {
  font-weight: 600;
  font-size: 14px;
  color: var(--color-text);
}

.size-dimensions {
  font-size: 13px;
  color: var(--color-text-light);
}

.checkmark {
  width: 20px;
  height: 20px;
  stroke-width: 3;
  color: var(--color-success);
  display: none;
}

.size-option.selected .checkmark {
  display: block;
}

/* ============================
   CROSS-SELL SECTIONS
   ============================ */
.works-with-section,
.items-you-might-like {
  margin-bottom: 40px;
  padding: 30px;
  background: var(--color-bg-light);
  border-radius: var(--border-radius-lg);
}

.section-title {
  font-size: 22px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 20px 0;
  display: flex;
  align-items: center;
  gap: 10px;
}

.view-all-link {
  margin-left: auto;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-secondary);
  text-decoration: none;
}

.works-with-carousel,
.related-items-carousel {
  position: relative;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 20px;
}

.cross-sell-card,
.recommendation-card {
  background: var(--color-white);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  padding: 15px;
  text-align: center;
  position: relative;
  transition: var(--transition);
}

.cross-sell-card:hover,
.recommendation-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transform: translateY(-2px);
}

.plus-badge-card {
  position: absolute;
  top: 10px;
  right: 10px;
  background: var(--color-secondary);
  color: var(--color-white);
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 700;
  font-style: italic;
}

.cross-sell-card img,
.recommendation-card img {
  width: 100%;
  height: 150px;
  object-fit: contain;
  margin-bottom: 12px;
}

.cross-sell-title,
.recommendation-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin: 0 0 8px 0;
  line-height: 1.4;
  min-height: 40px;
}

.recommendation-title a {
  color: var(--color-text);
  text-decoration: none;
}

.recommendation-title a:hover {
  color: var(--color-primary);
}

.cross-sell-price,
.recommendation-price {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-primary);
  margin-bottom: 12px;
}

.from-text {
  font-size: 12px;
  font-weight: 400;
  color: var(--color-text-light);
}

.unit {
  font-size: 13px;
  font-weight: 400;
  color: var(--color-text);
}

.quick-add-actions {
  display: flex;
  gap: 10px;
}

.quick-qty {
  width: 60px;
  padding: 8px;
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  text-align: center;
  font-size: 14px;
}

.btn-quick-add {
  flex: 1;
  padding: 8px 16px;
  background: var(--color-primary);
  color: var(--color-white);
  border: none;
  border-radius: var(--border-radius);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
}

.btn-quick-add:hover {
  background: var(--color-primary-hover);
}

.carousel-nav {
  position: absolute;
  top: 50%;
  right: -15px;
  transform: translateY(-50%);
  width: 40px;
  height: 40px;
  background: var(--color-white);
  border: 1px solid var(--color-border);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 24px;
  color: var(--color-text);
  transition: var(--transition);
}

.carousel-nav:hover {
  background: var(--color-primary);
  color: var(--color-white);
  border-color: var(--color-primary);
}

/* ============================
   PRODUCT CONTENT AREA
   ============================ */
.product-detailed-content {
  display: grid;
  grid-template-columns: 1fr 350px;
  gap: 40px;
  margin-bottom: 40px;
}

.content-heading {
  font-size: 24px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 20px 0;
}

.key-features-list {
  list-style: disc;
  padding-left: 20px;
  margin-bottom: 20px;
}

.key-features-list li {
  margin-bottom: 8px;
  font-size: 15px;
  line-height: 1.6;
  color: var(--color-text);
}

.description-text {
  font-size: 15px;
  line-height: 1.7;
  color: var(--color-text);
  margin-bottom: 20px;
}

.cta-link {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: var(--color-secondary);
  text-decoration: none;
  font-weight: 600;
  font-size: 15px;
  margin-bottom: 20px;
}

.cta-link:hover {
  text-decoration: underline;
}

.support-links-section {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 20px;
}

.support-link {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 15px;
  background: var(--color-bg-light);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  color: var(--color-text);
  text-decoration: none;
  font-size: 14px;
  transition: var(--transition);
}

.support-link:hover {
  background: var(--color-white);
  border-color: var(--color-primary);
}

/* Feature Sections with Images */
.feature-sections-detailed {
  margin: 40px 0;
}

.feature-block {
  display: grid;
  grid-template-columns: 300px 1fr;
  gap: 30px;
  margin-bottom: 40px;
  align-items: start;
}

.feature-block:nth-child(even) {
  grid-template-columns: 1fr 300px;
}

.feature-block:nth-child(even) .feature-image {
  order: 2;
}

.feature-image img {
  width: 100%;
  border-radius: var(--border-radius);
  border: 1px solid var(--color-border);
}

.feature-content h3 {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 12px 0;
}

.feature-content p {
  font-size: 15px;
  line-height: 1.7;
  color: var(--color-text);
}

/* Certifications */
.certifications-section {
  margin: 30px 0;
  padding: 20px;
  background: var(--color-bg-light);
  border-radius: var(--border-radius);
}

.cert-badges {
  display: flex;
  gap: 20px;
  justify-content: center;
  flex-wrap: wrap;
}

.cert-badge {
  padding: 15px;
  background: var(--color-white);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
}

.cert-badge img {
  height: 60px;
  width: auto;
}

/* ============================
   SIDEBAR MODULES
   ============================ */
.sidebar-module {
  background: var(--color-white);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  padding: 20px;
  margin-bottom: 20px;
}

.module-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 15px 0;
}

/* Installation Module */
.installation-module p {
  font-size: 14px;
  color: var(--color-text-light);
  margin-bottom: 12px;
}

.zip-input-group {
  display: flex;
  gap: 5px;
}

.zip-input {
  flex: 1;
  padding: 10px;
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  font-size: 14px;
}

.btn-check-zip {
  width: 40px;
  background: var(--color-primary);
  color: var(--color-white);
  border: none;
  border-radius: var(--border-radius);
  font-size: 20px;
  cursor: pointer;
  transition: var(--transition);
}

.btn-check-zip:hover {
  background: var(--color-primary-hover);
}

/* Shipping Module */
.shipping-module {
  text-align: center;
}

.shipping-module svg {
  margin: 0 auto 10px;
}

.shipping-module p {
  font-size: 14px;
  color: var(--color-text-light);
}

.shipping-weight {
  font-size: 13px;
  color: var(--color-text-light);
  margin-top: 5px;
}

/* Overview Module */
.overview-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.overview-list li {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin-bottom: 12px;
  font-size: 14px;
  line-height: 1.5;
  color: var(--color-text);
}

.overview-list svg {
  flex-shrink: 0;
  margin-top: 2px;
  color: var(--color-success);
  stroke-width: 3;
}

/* Quality Module */
.quality-row,
.upc-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid var(--color-border);
}

.quality-row:last-child,
.upc-row:last-child {
  border-bottom: none;
}

.quality-row .label,
.upc-row .label {
  font-size: 14px;
  color: var(--color-text-light);
  font-weight: 500;
}

.quality-badge {
  background: var(--color-success);
  color: var(--color-white);
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
}

.upc-row .value {
  font-size: 14px;
  color: var(--color-text);
  font-family: monospace;
}

/* Brand Module */
.brand-module {
  text-align: center;
}

.brand-logo {
  max-width: 200px;
  margin: 0 auto 15px;
}

.brand-name {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 15px 0;
}

.view-all-brand {
  display: inline-block;
  color: var(--color-secondary);
  text-decoration: none;
  font-size: 14px;
  font-weight: 500;
}

.view-all-brand:hover {
  text-decoration: underline;
}

/* Parts Module */
.parts-module {
  text-align: center;
}

.parts-module svg {
  margin: 0 auto 15px;
  color: var(--color-primary);
}

.parts-module p {
  font-size: 14px;
  color: var(--color-text-light);
  margin-bottom: 15px;
}

.btn-find-parts {
  width: 100%;
  padding: 12px;
  background: var(--color-success);
  color: var(--color-white);
  border: none;
  border-radius: var(--border-radius);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
}

.btn-find-parts:hover {
  background: #45A049;
}

/* Spare Parts List */
.spare-parts-list {
  margin-top: 15px;
  padding-top: 15px;
  border-top: 1px solid var(--color-border);
}

.spare-part-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  background: var(--color-bg-light);
  border-radius: var(--border-radius);
  margin-bottom: 10px;
}

.spare-part-item img {
  flex-shrink: 0;
  border-radius: var(--border-radius);
}

.spare-part-info {
  flex: 1;
}

.spare-part-info h4 {
  font-size: 13px;
  font-weight: 600;
  margin: 0 0 5px 0;
  color: var(--color-text);
}

.spare-part-price {
  font-size: 14px;
  font-weight: 700;
  color: var(--color-primary);
  margin: 0 0 5px 0;
}

.btn-add-spare-part {
  padding: 6px 12px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--border-radius);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
}

.btn-add-spare-part:hover {
  background: var(--color-primary-hover);
}

.no-parts-message {
  font-size: 13px;
  color: var(--color-text-light);
  font-style: italic;
  padding: 10px;
  text-align: center;
}

/* Resources Module */
.resource-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-bottom: 15px;
}

.resource-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 15px;
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  text-decoration: none;
  color: var(--color-text);
  transition: var(--transition);
}

.resource-card:hover {
  background: var(--color-bg-light);
  border-color: var(--color-primary);
}

.resource-icon {
  width: 40px;
  height: 40px;
  color: var(--color-secondary);
}

.resource-icon svg {
  width: 100%;
  height: 100%;
  stroke-width: 1.5;
}

.resource-card span {
  font-size: 12px;
  font-weight: 500;
  text-align: center;
}

.pdf-note {
  font-size: 12px;
  color: var(--color-text-light);
  line-height: 1.5;
}

.pdf-note a {
  color: var(--color-secondary);
}

/* Warranty Module */
.warranty-text {
  font-size: 13px;
  line-height: 1.6;
  color: var(--color-text);
}

/* Additional Resources */
.resource-links {
  list-style: none;
  padding: 0;
  margin: 0;
}

.resource-links li {
  margin-bottom: 10px;
}

.resource-links a {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--color-secondary);
  text-decoration: none;
  font-size: 14px;
}

.resource-links a:hover {
  text-decoration: underline;
}

/* ============================
   RELATED ITEMS SECTION
   ============================ */
.related-items-section {
  margin-bottom: 40px;
}

.related-categories-carousel {
  position: relative;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 20px;
}

.category-card {
  background: var(--color-white);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  padding: 20px;
  text-align: center;
  text-decoration: none;
  color: var(--color-text);
  transition: var(--transition);
}

.category-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transform: translateY(-2px);
}

.category-card img {
  width: 100%;
  height: 120px;
  object-fit: contain;
  margin-bottom: 15px;
}

.category-card h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-success);
  margin: 0 0 8px 0;
}

.category-card p {
  font-size: 14px;
  color: var(--color-text-light);
  margin: 0;
}

/* ============================
   CUSTOMER REVIEWS SECTION
   ============================ */
.customer-reviews-section {
  margin-bottom: 40px;
  padding: 40px;
  background: var(--color-bg-light);
  border-radius: var(--border-radius-lg);
}

.reviews-summary-container {
  display: grid;
  grid-template-columns: 300px 1fr;
  gap: 40px;
  margin-bottom: 40px;
  padding: 30px;
  background: var(--color-white);
  border-radius: var(--border-radius);
}

/* Overall Rating */
.reviews-summary-left {
  text-align: center;
  border-right: 1px solid var(--color-border);
  padding-right: 40px;
}

.overall-rating-number {
  font-size: 64px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
  margin-bottom: 15px;
}

.overall-rating-stars {
  display: flex;
  justify-content: center;
  gap: 5px;
  margin-bottom: 10px;
}

.star.large {
  font-size: 32px;
}

.review-count {
  font-size: 16px;
  color: var(--color-text-light);
  margin: 0;
}

/* Rating Breakdown */
.reviews-summary-right {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.rating-bar-row {
  display: grid;
  grid-template-columns: 60px 1fr 60px;
  align-items: center;
  gap: 15px;
}

.rating-number {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  display: flex;
  align-items: center;
  gap: 4px;
}

.rating-bar {
  height: 8px;
  background: var(--color-border);
  border-radius: 10px;
  overflow: hidden;
}

.rating-bar-fill {
  height: 100%;
  background: var(--color-success);
  transition: width 0.5s ease;
}

.rating-count {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  text-align: right;
}

/* ============================
   RESPONSIVE DESIGN
   ============================ */
@media (max-width: 1200px) {
  .product-main-wrapper {
    grid-template-columns: 1fr 350px;
    gap: 30px;
  }
  
  .product-detailed-content {
    grid-template-columns: 1fr 300px;
    gap: 30px;
  }
}

@media (max-width: 992px) {
  .product-main-wrapper {
    grid-template-columns: 1fr;
  }
  
  .product-sidebar-right {
    position: static;
    max-height: none;
  }
  
  .product-detailed-content {
    grid-template-columns: 1fr;
  }
  
  .content-sidebar {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
  }
  
  .reviews-summary-container {
    grid-template-columns: 1fr;
  }
  
  .reviews-summary-left {
    border-right: none;
    border-bottom: 1px solid var(--color-border);
    padding-right: 0;
    padding-bottom: 30px;
  }
  
  .feature-block {
    grid-template-columns: 1fr !important;
  }
  
  .feature-block:nth-child(even) .feature-image {
    order: 1;
  }
  
  /* Gallery mobile layout - thumbnails horizontal below */
  .gallery-container {
    grid-template-columns: 1fr;
  }
  
  .product-thumbnail-gallery {
    flex-direction: row;
    max-height: none;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 10px;
  }
  
  .product-thumbnail-gallery::-webkit-scrollbar {
    height: 6px;
    width: auto;
  }
}

@media (max-width: 768px) {
  .product-pricing-box {
    grid-template-columns: 1fr;
  }
  
  .quantity-cart-section {
    grid-template-columns: 1fr;
  }
  
  .content-sidebar {
    grid-template-columns: 1fr;
  }
  
  .works-with-carousel,
  .related-items-carousel,
  .related-categories-carousel {
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
  }
  
  .resource-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .product-webstaurant-container {
    padding: 15px;
  }
  
  .product-title {
    font-size: 22px;
  }
  
  .price-amount {
    font-size: 28px;
  }
  
  .works-with-carousel,
  .related-items-carousel,
  .related-categories-carousel {
    grid-template-columns: 1fr;
  }
}
</style>

<script>
// FILE LOCATION: assets/product-webstaurant-style.js

document.addEventListener('DOMContentLoaded', function() {
  
  // ============================
  // PRODUCT IMAGE GALLERY
  // ============================
  const mainImage = document.getElementById('main-product-image');
  const thumbnails = document.querySelectorAll('.thumbnail-item');
  
  thumbnails.forEach(thumb => {
    thumb.addEventListener('click', function() {
      if (this.classList.contains('video-thumb')) {
        // Handle video thumbnail click
        console.log('Video thumbnail clicked');
        return;
      }
      
      if (this.classList.contains('view-3d')) {
        // Handle 3D view click
        console.log('3D view clicked');
        return;
      }
      
      const newImageUrl = this.dataset.imageUrl;
      if (newImageUrl && mainImage) {
        mainImage.src = newImageUrl;
      }
      
      // Update active state
      thumbnails.forEach(t => t.classList.remove('active'));
      this.classList.add('active');
    });
  });
  
  // Zoom functionality
  const zoomButton = document.querySelector('.zoom-button');
  if (zoomButton) {
    zoomButton.addEventListener('click', function() {
      // Implement zoom modal or functionality
      console.log('Zoom clicked');
    });
  }
  
  // ============================
  // QUANTITY CONTROLS
  // ============================
  window.increaseQuantity = function() {
    const input = document.getElementById('quantity-input');
    if (input) {
      input.value = parseInt(input.value) + 1;
    }
  };
  
  window.decreaseQuantity = function() {
    const input = document.getElementById('quantity-input');
    if (input && parseInt(input.value) > 1) {
      input.value = parseInt(input.value) - 1;
    }
  };
  
  // ============================
  // ADD TO CART
  // ============================
  window.addToCart = function(event) {
    event.preventDefault();
    
    const button = event.currentTarget;
    const btnText = button.querySelector('.btn-text');
    const spinner = button.querySelector('.loading-spinner');
    
    // Show loading state
    button.classList.add('loading');
    if (btnText) btnText.classList.add('hidden');
    if (spinner) spinner.classList.remove('hidden');
    
    // Get form data
    const quantity = document.getElementById('quantity-input').value;
    const variantId = document.querySelector('[name="id"]')?.value;
    
    if (!variantId) {
      console.error('No variant selected');
      resetButton();
      return;
    }
    
    const formData = {
      items: [{
        id: variantId,
        quantity: parseInt(quantity)
      }]
    };
    
    // Add to cart via Shopify API
    fetch('/cart/add.js', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(formData)
    })
    .then(response => response.json())
    .then(data => {
      console.log('Added to cart:', data);
      
      // Trigger cart update event
      if (typeof Shopify !== 'undefined' && Shopify.theme) {
        document.dispatchEvent(new CustomEvent('cart:updated'));
      }
      
      // Reset button after delay
      setTimeout(resetButton, 1000);
    })
    .catch(error => {
      console.error('Error adding to cart:', error);
      resetButton();
    });
    
    function resetButton() {
      button.classList.remove('loading');
      if (btnText) btnText.classList.remove('hidden');
      if (spinner) spinner.classList.add('hidden');
    }
  };
  
  // ============================
  // SIZE SELECTION
  // ============================
  const sizeOptions = document.querySelectorAll('.size-option');
  const selectedSizeDisplay = document.getElementById('selected-size');
  
  sizeOptions.forEach(option => {
    option.addEventListener('click', function() {
      sizeOptions.forEach(opt => opt.classList.remove('selected'));
      this.classList.add('selected');
      
      const sizeLabel = this.querySelector('.size-label').textContent;
      if (selectedSizeDisplay) {
        selectedSizeDisplay.textContent = sizeLabel;
      }
    });
  });
  
  // ============================
  // CAROUSEL NAVIGATION
  // ============================
  window.scrollCarousel = function(direction, carouselType) {
    let carousel;
    
    if (carouselType === 'works-with') {
      carousel = document.querySelector('.works-with-carousel');
    } else if (carouselType === 'recommendations') {
      carousel = document.querySelector('.related-items-carousel');
    } else if (carouselType === 'related-categories') {
      carousel = document.querySelector('.related-categories-carousel');
    }
    
    if (!carousel) return;
    
    const scrollAmount = 240; // Card width + gap
    
    if (direction === 'next') {
      carousel.scrollBy({ left: scrollAmount, behavior: 'smooth' });
    } else {
      carousel.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
    }
  };
  
  // ============================
  // QUICK ADD TO CART
  // ============================
  const quickAddButtons = document.querySelectorAll('.btn-quick-add');
  
  quickAddButtons.forEach(button => {
    button.addEventListener('click', function() {
      const productId = this.dataset.productId;
      const qtyInput = this.parentElement.querySelector('.quick-qty');
      const quantity = qtyInput ? parseInt(qtyInput.value) : 1;
      
      const originalText = this.textContent;
      this.textContent = 'Adding...';
      this.disabled = true;
      
      fetch('/cart/add.js', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          items: [{
            id: productId,
            quantity: quantity
          }]
        })
      })
      .then(response => response.json())
      .then(data => {
        this.textContent = '✓ Added';
        
        // Trigger cart update
        document.dispatchEvent(new CustomEvent('cart:updated'));
        
        setTimeout(() => {
          this.textContent = originalText;
          this.disabled = false;
        }, 2000);
      })
      .catch(error => {
        console.error('Error:', error);
        this.textContent = 'Error';
        setTimeout(() => {
          this.textContent = originalText;
          this.disabled = false;
        }, 2000);
      });
    });
  });
  
  // ============================
  // SHARE PRODUCT
  // ============================
  window.shareProduct = function() {
    if (navigator.share) {
      navigator.share({
        title: document.querySelector('.product-title').textContent,
        url: window.location.href
      }).catch(err => console.log('Error sharing:', err));
    } else {
      // Fallback: Copy to clipboard
      navigator.clipboard.writeText(window.location.href);
      alert('Link copied to clipboard!');
    }
  };
  
  // ============================
  // QUESTION MODAL
  // ============================
  window.openQuestionModal = function() {
    // Implement question modal
    console.log('Open question modal');
  };
  
  // ============================
  // WISHLIST
  // ============================
  window.addToWishlist = function() {
    // Implement wishlist functionality
    console.log('Add to wishlist');
  };
  
  // ============================
  // VARIANT SELECTION
  // ============================
  const variantOptions = document.querySelectorAll('.option-values input[type="radio"]');
  
  variantOptions.forEach(option => {
    option.addEventListener('change', function() {
      // Get selected options
      const selectedOptions = {};
      document.querySelectorAll('.option-values input[type="radio"]:checked').forEach(input => {
        const optionName = input.name.replace('option-', '');
        selectedOptions[optionName] = input.value;
      });
      
      // Find matching variant (you'll need to implement this based on your product data)
      console.log('Selected options:', selectedOptions);
      
      // Update price, availability, etc.
    });
  });
  
  // ============================
  // SMOOTH SCROLL TO REVIEWS
  // ============================
  const reviewsLink = document.querySelector('.reviews-link');
  if (reviewsLink) {
    reviewsLink.addEventListener('click', function(e) {
      e.preventDefault();
      const reviewsSection = document.getElementById('reviews-section');
      if (reviewsSection) {
        reviewsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  }
  
});
</script>

{% schema %}
{
  "name": "Product Style",
  "settings": [
    {
      "type": "header",
      "content": "General Settings"
    },
    {
      "type": "checkbox",
      "id": "enable_member_pricing",
      "label": "Enable Member Pricing",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "Show Vendor/Brand",
      "default": true
    },
    {
      "type": "header",
      "content": "Product Images"
    },
    {
      "type": "checkbox",
      "id": "enable_zoom",
      "label": "Enable Image Zoom",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_3d_view",
      "label": "Show 3D View Option",
      "default": true
    },
    {
      "type": "header",
      "content": "Cross-Selling"
    },
    {
      "type": "checkbox",
      "id": "show_works_with",
      "label": "Show 'Works With' Section",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_you_might_like",
      "label": "Show 'Items You Might Like'",
      "default": true
    },
    {
      "type": "range",
      "id": "recommendations_count",
      "min": 3,
      "max": 12,
      "step": 1,
      "label": "Number of Recommendations",
      "default": 6
    },
    {
      "type": "header",
      "content": "Reviews"
    },
    {
      "type": "checkbox",
      "id": "show_reviews",
      "label": "Show Reviews Section",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "trust_badge",
      "name": "Trust Badge",
      "settings": [
        {
          "type": "image_picker",
          "id": "badge_image",
          "label": "Badge Image"
        },
        {
          "type": "text",
          "id": "badge_text",
          "label": "Badge Text"
        }
      ]
    }
  ]
}
{% endschema %}
